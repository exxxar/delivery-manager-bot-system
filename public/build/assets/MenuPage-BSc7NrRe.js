import{R as U}from"./AdminList-DnFVByuD.js";import{_ as x}from"./SaleForm-BxJWcxSr.js";import{c as p,o as d,b as t,a as f,F as I,f as R,H as V,I as k,w as r,v as i,k as S,i as c,h as w,t as _,e as b,J as C,K as q,d as y}from"./app-cgtwwb2d.js";import{m as A}from"./makeAxiosFactory-CxzlH8pq.js";import{_ as h}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as v}from"./users-DNUFq-ng.js";import{u as $}from"./baseExports-ByovJCZi.js";import"./UserForm-frGpm4xm.js";import"./Pagination-DFrGqlTd.js";import"./AgentList-Xd7521kJ.js";import"./index-_KkBud01.js";import"./SupplierList-BGbgwFT9.js";import"./useConfitmModalStore-DOjvUCmK.js";import"./ProductList-BNAgYQC4.js";import"./ProductCategoryList-DxcVE_mG.js";const T={class:"btn-group-vertical w-100",role:"group","aria-label":"Вертикальное меню действий"},E={class:"modal fade",id:"newSaleModal",tabindex:"-1"},J={class:"modal-dialog modal-fullscreen"},P={class:"modal-content"},j={class:"modal-body"},B={class:"modal fade",id:"reportModal",tabindex:"-1"},N={class:"modal-dialog"},L={class:"modal-content"},G={class:"modal-body"},O={methods:{goTo(n){this.$router.push({name:n})},handleReport(n){bootstrap.Modal.getInstance(document.getElementById("reportModal")).hide(),console.log("Отчёт сформирован:",n)},async fetchData(){bootstrap.Modal.getInstance(document.getElementById("newSaleModal")).hide()}}},D=Object.assign(O,{__name:"MenuAdmin",setup(n){return(o,e)=>(d(),p(I,null,[t("div",T,[t("button",{type:"button",onClick:e[0]||(e[0]=m=>o.goTo("SalePage")),class:"btn btn-outline-primary p-3"},"Список доставок"),e[3]||(e[3]=t("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#newSaleModal",class:"btn btn-outline-primary p-3"},"Внести доставку",-1)),e[4]||(e[4]=t("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#reportModal",class:"btn btn-outline-primary p-3"},"Сформировать отчет",-1)),t("button",{type:"button",onClick:e[1]||(e[1]=m=>o.goTo("ProductPage")),class:"btn btn-outline-primary p-3"},"Работа с товаром "),t("button",{type:"button",onClick:e[2]||(e[2]=m=>o.goTo("SupplierPage")),class:"btn btn-outline-primary p-3"},"Список поставщиков")]),t("div",E,[t("div",J,[t("div",P,[e[5]||(e[5]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Создание задания"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1)),t("div",j,[f(x,{onSaved:o.fetchData},null,8,["onSaved"])])])])]),t("div",B,[t("div",N,[t("div",L,[e[6]||(e[6]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Генератор отчетов"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1)),t("div",G,[f(U,{onGenerateReport:o.handleReport},null,8,["onGenerateReport"])])])])])],64))}}),W="/bot-api/forms",M=R("job",{state:()=>({loading:!1,error:null,successMessage:null}),actions:{async submitAdminForm(n){return this.submitForm("admin-job",n,"Заявка администратора отправлена","Ошибка отправки заявки администратора")},async submitAgentForm(n){return this.submitForm("agent-job",n,"Заявка младшего администратора отправлена","Ошибка отправки заявки")},async submitSupplierForm(n){return this.submitForm("supplier-job",n,"Заявка поставщика отправлена","Ошибка отправки заявки поставщика")},async submitClientForm(n){return this.submitForm("client-job",n,"Заявка клиента отправлена","Ошибка отправки заявки клиента")},async submitForm(n,o,e,m){var a,u;this.loading=!0,this.error=null;const s=V();try{const{data:l}=await A(`${W}/${n}`,"POST",o);return this.successMessage=l.message??e,s.show(this.successMessage,"success"),l}catch(l){throw this.error=((u=(a=l.response)==null?void 0:a.data)==null?void 0:u.message)??m,s.show(this.error,"error"),l}finally{this.loading=!1}}}}),H={name:"AdminJobForm",data(){return{jobStore:M(),form:{fio:"",email:"",phone:"",age:null,salary:null,experience:"",reason:"",consent:!1}}},methods:{submitForm(){if(!this.form.consent){alert("Необходимо дать согласие на обработку данных.");return}this.jobStore.submitAdminForm(this.form),this.$emit("submit-application",this.form);const n={fio:"",email:"",phone:"",age:null,salary:null,experience:"",reason:"",consent:!1};this.form=n}}},K={class:"form-floating mb-2"},z={class:"form-floating mb-2"},Q={class:"form-floating mb-2"},X={class:"form-floating mb-2"},Y={class:"form-floating mb-2"},Z={class:"form-floating mb-2"},oo={class:"form-floating mb-2"},to={class:"form-check mb-2"},eo=["disabled"];function so(n,o,e,m,s,a){const u=k("mask");return d(),p("form",{onSubmit:o[8]||(o[8]=w((...l)=>a.submitForm&&a.submitForm(...l),["prevent"])),class:""},[t("div",K,[r(t("input",{type:"text",class:"form-control",id:"fioInput","onUpdate:modelValue":o[0]||(o[0]=l=>s.form.fio=l),placeholder:"ФИО",required:""},null,512),[[i,s.form.fio]]),o[9]||(o[9]=t("label",{for:"fioInput"},"ФИО",-1))]),t("div",z,[r(t("input",{type:"email",class:"form-control",id:"emailInput","onUpdate:modelValue":o[1]||(o[1]=l=>s.form.email=l),placeholder:"Email",required:""},null,512),[[i,s.form.email]]),o[10]||(o[10]=t("label",{for:"emailInput"},"Email",-1))]),t("div",Q,[r(t("input",{type:"tel",class:"form-control",id:"phoneInput","onUpdate:modelValue":o[2]||(o[2]=l=>s.form.phone=l),placeholder:"Телефон",required:""},null,512),[[i,s.form.phone],[u,"+7(###) ###-##-##"]]),o[11]||(o[11]=t("label",{for:"phoneInput"},"Телефон",-1))]),t("div",X,[r(t("input",{type:"number",class:"form-control",id:"ageInput","onUpdate:modelValue":o[3]||(o[3]=l=>s.form.age=l),placeholder:"Возраст",min:"18",required:""},null,512),[[i,s.form.age]]),o[12]||(o[12]=t("label",{for:"ageInput"},"Возраст",-1))]),t("div",Y,[r(t("input",{type:"number",class:"form-control",id:"salaryInput","onUpdate:modelValue":o[4]||(o[4]=l=>s.form.salary=l),placeholder:"Зарплатные ожидания",min:"0",required:""},null,512),[[i,s.form.salary]]),o[13]||(o[13]=t("label",{for:"salaryInput"},"Зарплатные ожидания (₽\\мес)",-1))]),t("div",Z,[r(t("textarea",{class:"form-control",id:"experienceInput","onUpdate:modelValue":o[5]||(o[5]=l=>s.form.experience=l),placeholder:"Опыт работы",style:{height:"100px"}},null,512),[[i,s.form.experience]]),o[14]||(o[14]=t("label",{for:"experienceInput"},"Опыт работы",-1))]),t("div",oo,[r(t("textarea",{class:"form-control",id:"reasonInput","onUpdate:modelValue":o[6]||(o[6]=l=>s.form.reason=l),placeholder:"Почему хотите стать администратором",style:{height:"100px"}},null,512),[[i,s.form.reason]]),o[15]||(o[15]=t("label",{for:"reasonInput"},"Почему хотите стать администратором",-1))]),t("div",to,[r(t("input",{class:"form-check-input",type:"checkbox",id:"consentCheck","onUpdate:modelValue":o[7]||(o[7]=l=>s.form.consent=l),required:""},null,512),[[S,s.form.consent]]),o[16]||(o[16]=t("label",{class:"form-check-label",for:"consentCheck"},[c(" Я даю согласие на обработку персональных данных согласно "),t("a",{href:"https://www.consultant.ru/document/cons_doc_LAW_61801/",target:"_blank"}," Федеральному закону №152-ФЗ ")],-1))]),t("button",{type:"submit",disabled:!s.form.consent,class:"btn btn-primary w-100 p-3"},"Отправить заявку ",8,eo)],32)}const lo=h(H,[["render",so]]),no={name:"AgentJobForm",data(){return{jobStore:M(),form:{fio:"",email:"",phone:"",age:null,salary:null,experience:"",skills:"",reason:"",consent:!1}}},methods:{submitForm(){if(!this.form.consent){alert("Необходимо дать согласие на обработку данных.");return}this.jobStore.submitAgentForm(this.form),this.$emit("submit-application",this.form)}}},ro={class:"form-floating mb-2"},io={class:"form-floating mb-2"},mo={class:"form-floating mb-2"},ao={class:"form-floating mb-2"},uo={class:"form-floating mb-2"},po={class:"form-floating mb-2"},bo={class:"form-floating mb-2"},fo={class:"form-floating mb-2"},go={class:"form-check mb-2"},co=["disabled"];function yo(n,o,e,m,s,a){const u=k("mask");return d(),p("form",{onSubmit:o[9]||(o[9]=w((...l)=>a.submitForm&&a.submitForm(...l),["prevent"]))},[t("div",ro,[r(t("input",{type:"text",class:"form-control",id:"fioInput","onUpdate:modelValue":o[0]||(o[0]=l=>s.form.fio=l),placeholder:"ФИО",required:""},null,512),[[i,s.form.fio]]),o[10]||(o[10]=t("label",{for:"fioInput"},"ФИО",-1))]),t("div",io,[r(t("input",{type:"email",class:"form-control",id:"emailInput","onUpdate:modelValue":o[1]||(o[1]=l=>s.form.email=l),placeholder:"Email",required:""},null,512),[[i,s.form.email]]),o[11]||(o[11]=t("label",{for:"emailInput"},"Email",-1))]),t("div",mo,[r(t("input",{type:"tel",class:"form-control",id:"phoneInput","onUpdate:modelValue":o[2]||(o[2]=l=>s.form.phone=l),placeholder:"Телефон",required:""},null,512),[[i,s.form.phone],[u,"+7(###) ###-##-##"]]),o[12]||(o[12]=t("label",{for:"phoneInput"},"Телефон",-1))]),t("div",ao,[r(t("input",{type:"number",class:"form-control",id:"ageInput","onUpdate:modelValue":o[3]||(o[3]=l=>s.form.age=l),placeholder:"Возраст",min:"18",required:""},null,512),[[i,s.form.age]]),o[13]||(o[13]=t("label",{for:"ageInput"},"Возраст",-1))]),t("div",uo,[r(t("input",{type:"number",class:"form-control",id:"salaryInput","onUpdate:modelValue":o[4]||(o[4]=l=>s.form.salary=l),placeholder:"Зарплатные ожидания",min:"0",required:""},null,512),[[i,s.form.salary]]),o[14]||(o[14]=t("label",{for:"salaryInput"},"Зарплатные ожидания (₽)",-1))]),t("div",po,[r(t("textarea",{class:"form-control",id:"experienceInput","onUpdate:modelValue":o[5]||(o[5]=l=>s.form.experience=l),placeholder:"Опыт работы в продажах",style:{height:"100px"}},null,512),[[i,s.form.experience]]),o[15]||(o[15]=t("label",{for:"experienceInput"},"Опыт работы в продажах",-1))]),t("div",bo,[r(t("textarea",{class:"form-control",id:"skillsInput","onUpdate:modelValue":o[6]||(o[6]=l=>s.form.skills=l),placeholder:"Навыки переговоров",style:{height:"100px"}},null,512),[[i,s.form.skills]]),o[16]||(o[16]=t("label",{for:"skillsInput"},"Навыки переговоров",-1))]),t("div",fo,[r(t("textarea",{class:"form-control",id:"reasonInput","onUpdate:modelValue":o[7]||(o[7]=l=>s.form.reason=l),placeholder:"Почему хотите стать младшим администратором",style:{height:"100px"}},null,512),[[i,s.form.reason]]),o[17]||(o[17]=t("label",{for:"reasonInput"},"Почему хотите стать младшим администратором",-1))]),t("div",go,[r(t("input",{class:"form-check-input",type:"checkbox",id:"consentCheck","onUpdate:modelValue":o[8]||(o[8]=l=>s.form.consent=l),required:""},null,512),[[S,s.form.consent]]),o[18]||(o[18]=t("label",{class:"form-check-label",for:"consentCheck"},[c(" Я даю согласие на обработку персональных данных согласно "),t("a",{href:"https://www.consultant.ru/document/cons_doc_LAW_61801/",target:"_blank"}," Федеральному закону №152-ФЗ ")],-1))]),t("button",{disabled:!s.form.consent,type:"submit",class:"btn btn-primary w-100 p-3"},"Отправить заявку",8,co)],32)}const vo=h(no,[["render",yo]]),Io={name:"ClientJobForm",data(){return{jobStore:M(),form:{company_name:"",reg_number:"",email:"",phone:"",categories:"",volume:null,terms:"",comments:"",consent:!1}}},methods:{submitForm(){if(!this.form.consent){alert("Необходимо дать согласие на обработку данных.");return}this.jobStore.submitClientForm(this.form),this.$emit("submit-application",this.form)}}},ho={class:"form-floating mb-2"},ko={class:"form-floating mb-2"},So={class:"form-floating mb-2"},wo={class:"form-floating mb-2"},Mo={class:"form-floating mb-2"},_o={class:"form-floating mb-2"},Uo={class:"form-floating"},Vo={class:"form-floating mb-2"},$o={class:"form-check mb-2"},Fo=["disabled"];function xo(n,o,e,m,s,a){const u=k("mask");return d(),p("form",{onSubmit:o[9]||(o[9]=w((...l)=>a.submitForm&&a.submitForm(...l),["prevent"]))},[t("div",ho,[r(t("input",{type:"text",class:"form-control",id:"companyNameInput","onUpdate:modelValue":o[0]||(o[0]=l=>s.form.company_name=l),placeholder:"Название компании",required:""},null,512),[[i,s.form.company_name]]),o[10]||(o[10]=t("label",{for:"companyNameInput"},"Название компании",-1))]),t("div",ko,[r(t("input",{type:"text",class:"form-control",id:"regNumberInput","onUpdate:modelValue":o[1]||(o[1]=l=>s.form.reg_number=l),placeholder:"ИНН / регистрационный номер",required:""},null,512),[[i,s.form.reg_number]]),o[11]||(o[11]=t("label",{for:"regNumberInput"},"ИНН / регистрационный номер",-1))]),t("div",So,[r(t("input",{type:"email",class:"form-control",id:"emailInput","onUpdate:modelValue":o[2]||(o[2]=l=>s.form.email=l),placeholder:"Email",required:""},null,512),[[i,s.form.email]]),o[12]||(o[12]=t("label",{for:"emailInput"},"Email",-1))]),t("div",wo,[r(t("input",{type:"tel",class:"form-control",id:"phoneInput","onUpdate:modelValue":o[3]||(o[3]=l=>s.form.phone=l),placeholder:"Телефон",required:""},null,512),[[i,s.form.phone],[u,"+7(###) ###-##-##"]]),o[13]||(o[13]=t("label",{for:"phoneInput"},"Телефон",-1))]),t("div",Mo,[r(t("input",{type:"text",class:"form-control",id:"categoriesInput","onUpdate:modelValue":o[4]||(o[4]=l=>s.form.categories=l),placeholder:"Категории товаров"},null,512),[[i,s.form.categories]]),o[14]||(o[14]=t("label",{for:"categoriesInput"},"Категории интересующих товаров",-1))]),o[19]||(o[19]=t("p",{class:"mb-2 fst-italic"},"Планируемый объём закупки (шт./мес.)",-1)),t("div",_o,[r(t("input",{type:"number",class:"form-control",id:"volumeInput","onUpdate:modelValue":o[5]||(o[5]=l=>s.form.volume=l),placeholder:"Объём закупки",min:"0"},null,512),[[i,s.form.volume]]),o[15]||(o[15]=t("label",{for:"volumeInput"},"Объем закупки",-1))]),t("div",Uo,[r(t("textarea",{class:"form-control",id:"termsInput","onUpdate:modelValue":o[6]||(o[6]=l=>s.form.terms=l),placeholder:"Условия сотрудничества",style:{height:"100px"}},null,512),[[i,s.form.terms]]),o[16]||(o[16]=t("label",{for:"termsInput"},"Условия сотрудничества ",-1))]),o[20]||(o[20]=t("p",{class:"small fst-italic mb-2"},"(сроки, оплата, доставка)",-1)),t("div",Vo,[r(t("textarea",{class:"form-control",id:"commentsInput","onUpdate:modelValue":o[7]||(o[7]=l=>s.form.comments=l),placeholder:"Дополнительные комментарии",style:{height:"100px"}},null,512),[[i,s.form.comments]]),o[17]||(o[17]=t("label",{for:"commentsInput"},"Дополнительные комментарии",-1))]),t("div",$o,[r(t("input",{class:"form-check-input",type:"checkbox",id:"consentCheck","onUpdate:modelValue":o[8]||(o[8]=l=>s.form.consent=l),required:""},null,512),[[S,s.form.consent]]),o[18]||(o[18]=t("label",{class:"form-check-label",for:"consentCheck"},[c(" Я даю согласие на обработку персональных данных согласно "),t("a",{href:"https://www.consultant.ru/document/cons_doc_LAW_61801/",target:"_blank"}," Федеральному закону №152-ФЗ ")],-1))]),t("button",{disabled:!s.form.consent,type:"submit",class:"btn btn-primary w-100 p-3"},"Стать клиентом",8,Fo)],32)}const Ro=h(Io,[["render",xo]]),Co={name:"SupplierJobForm",data(){return{jobStore:M(),form:{company_name:"",reg_number:"",email:"",phone:"",categories:"",products:"",volume:null,terms:"",consent:!1}}},methods:{submitForm(){if(!this.form.consent){alert("Необходимо дать согласие на обработку данных.");return}this.jobStore.submitSupplierForm(this.form),this.$emit("submit-application",this.form)}}},qo={class:"form-floating mb-2"},Ao={class:"form-floating mb-2"},To={class:"form-floating mb-2"},Eo={class:"form-floating mb-2"},Jo={class:"form-floating"},Po={class:"form-floating mb-2"},jo={class:"form-floating mb-2"},Bo={class:"form-floating mb-2"},No={class:"form-check mb-2"},Lo=["disabled"];function Go(n,o,e,m,s,a){const u=k("mask");return d(),p("form",{onSubmit:o[9]||(o[9]=w((...l)=>a.submitForm&&a.submitForm(...l),["prevent"]))},[t("div",qo,[r(t("input",{type:"text",class:"form-control",id:"companyNameInput","onUpdate:modelValue":o[0]||(o[0]=l=>s.form.company_name=l),placeholder:"Название компании",required:""},null,512),[[i,s.form.company_name]]),o[10]||(o[10]=t("label",{for:"companyNameInput"},"Название компании",-1))]),t("div",Ao,[r(t("input",{type:"text",class:"form-control",id:"regNumberInput","onUpdate:modelValue":o[1]||(o[1]=l=>s.form.reg_number=l),placeholder:"ИНН / регистрационный номер",required:""},null,512),[[i,s.form.reg_number]]),o[11]||(o[11]=t("label",{for:"regNumberInput"},"ИНН / регистрационный номер",-1))]),t("div",To,[r(t("input",{type:"email",class:"form-control",id:"emailInput","onUpdate:modelValue":o[2]||(o[2]=l=>s.form.email=l),placeholder:"Email",required:""},null,512),[[i,s.form.email]]),o[12]||(o[12]=t("label",{for:"emailInput"},"Email",-1))]),t("div",Eo,[r(t("input",{type:"tel",class:"form-control",id:"phoneInput","onUpdate:modelValue":o[3]||(o[3]=l=>s.form.phone=l),placeholder:"Телефон",required:""},null,512),[[i,s.form.phone],[u,"+7(###) ###-##-##"]]),o[13]||(o[13]=t("label",{for:"phoneInput"},"Телефон",-1))]),t("div",Jo,[r(t("input",{type:"text",class:"form-control",id:"categoriesInput","onUpdate:modelValue":o[4]||(o[4]=l=>s.form.categories=l),placeholder:"Категории товаров"},null,512),[[i,s.form.categories]]),o[14]||(o[14]=t("label",{for:"categoriesInput"},"Категории товаров ",-1))]),o[19]||(o[19]=t("p",{class:"small fst-italic mb-2"},"(например: продукты, техника)",-1)),t("div",Po,[r(t("textarea",{class:"form-control",id:"productsInput","onUpdate:modelValue":o[5]||(o[5]=l=>s.form.products=l),placeholder:"Описание товаров",style:{height:"100px"}},null,512),[[i,s.form.products]]),o[15]||(o[15]=t("label",{for:"productsInput"},"Описание товаров",-1))]),t("div",jo,[r(t("input",{type:"number",class:"form-control",id:"volumeInput","onUpdate:modelValue":o[6]||(o[6]=l=>s.form.volume=l),placeholder:"Объём поставок",min:"0"},null,512),[[i,s.form.volume]]),o[16]||(o[16]=t("label",{for:"volumeInput"},"Средний объём поставок (шт./мес.)",-1))]),t("div",Bo,[r(t("textarea",{class:"form-control",id:"termsInput","onUpdate:modelValue":o[7]||(o[7]=l=>s.form.terms=l),placeholder:"Условия сотрудничества",style:{height:"100px"}},null,512),[[i,s.form.terms]]),o[17]||(o[17]=t("label",{for:"termsInput"},"Условия сотрудничества (сроки, оплата)",-1))]),t("div",No,[r(t("input",{class:"form-check-input",type:"checkbox",id:"consentCheck","onUpdate:modelValue":o[8]||(o[8]=l=>s.form.consent=l),required:""},null,512),[[S,s.form.consent]]),o[18]||(o[18]=t("label",{class:"form-check-label",for:"consentCheck"},[c(" Я даю согласие на обработку персональных данных согласно "),t("a",{href:"https://www.consultant.ru/document/cons_doc_LAW_61801/",target:"_blank"}," Федеральному закону №152-ФЗ ")],-1))]),t("button",{disabled:!s.form.consent,type:"submit",class:"btn btn-primary w-100 p-3"},"Стать поставщиком",8,Lo)],32)}const Oo=h(Co,[["render",Go]]);let g={spent_time_counter:0};function Do(){const n=parseInt(localStorage.getItem("delivery_click_counter")||"0");return n>0?(F(n),!0):!1}function F(n){g.spent_time_counter=parseInt(n)!=null?Math.min(parseInt(n),10):10;let o=setInterval(()=>{g.spent_time_counter>0?g.spent_time_counter--:(clearInterval(o),g.spent_time_counter=null),localStorage.setItem("delivery_click_counter",g.spent_time_counter),window.dispatchEvent(new CustomEvent("trigger-spent-timer",{detail:g.spent_time_counter}))},1e3)}const Wo=["disabled"],Ho={key:0},Ko={key:1},zo={class:"modal fade",id:"adminJobModal",tabindex:"-1"},Qo={class:"modal-dialog modal-fullscreen"},Xo={class:"modal-content"},Yo={class:"modal-body"},Zo={class:"modal fade",id:"agentJobModal",tabindex:"-1"},ot={class:"modal-dialog modal-fullscreen"},tt={class:"modal-content"},et={class:"modal-body"},st={class:"modal fade",id:"supplierJobModal",tabindex:"-1"},lt={class:"modal-dialog modal-fullscreen"},nt={class:"modal-content"},rt={class:"modal-body"},it={class:"modal fade",id:"clientJobModal",tabindex:"-1"},mt={class:"modal-dialog modal-fullscreen"},at={class:"modal-content"},dt={class:"modal-body"},ut={data(){return{spent_time:0,userStore:v(),alertStore:V()}},mounted(){Do(),window.addEventListener("trigger-spent-timer",n=>{this.spent_time=n.detail})},methods:{hideModal(n){const o=document.getElementById(n);bootstrap.Modal.getInstance(o).hide()},requestInvite(){F(10),this.userStore.selfRoleRequest().then(()=>{this.alertStore.show("Запрос успешно отправлен","success")}).catch(()=>{this.alertStore.show("Ошибка отправки запроса","error")})}}},pt=Object.assign(ut,{__name:"MenuUser",setup(n){return(o,e)=>(d(),p(I,null,[t("button",{onClick:e[0]||(e[0]=(...m)=>o.requestInvite&&o.requestInvite(...m)),disabled:o.spent_time>0,type:"button",class:"btn btn-primary p-3 mb-2 w-100"},[o.spent_time>0?(d(),p("span",Ho,_(o.spent_time)+" сек.",1)):(d(),p("span",Ko,"Я уже являюсь сотрудником"))],8,Wo),e[9]||(e[9]=t("div",{class:"btn-group-vertical w-100",role:"group","aria-label":"Вертикальное меню"},[t("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#adminJobModal",class:"btn btn-outline-primary p-3"},"Стать старшим администратором "),t("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#agentJobModal",class:"btn btn-outline-primary p-3"},"Стать администратором "),t("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#supplierJobModal",class:"btn btn-outline-primary p-3"},"Стать поставщиком "),t("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#clientJobModal",class:"btn btn-outline-primary p-3"},"Стать клиентом (сотрудничество) ")],-1)),t("div",zo,[t("div",Qo,[t("div",Xo,[e[5]||(e[5]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Заявка на администратора"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1)),t("div",Yo,[f(lo,{onSubmitApplication:e[1]||(e[1]=m=>o.hideModal("adminJobModal"))})])])])]),t("div",Zo,[t("div",ot,[t("div",tt,[e[6]||(e[6]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Заявка на младшего администратора"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1)),t("div",et,[f(vo,{onSubmitApplication:e[2]||(e[2]=m=>o.hideModal("agentJobModal"))})])])])]),t("div",st,[t("div",lt,[t("div",nt,[e[7]||(e[7]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Заявка поставщика"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1)),t("div",rt,[f(Oo,{onSubmitApplication:e[3]||(e[3]=m=>o.hideModal("supplierJobModal"))})])])])]),t("div",it,[t("div",mt,[t("div",at,[e[8]||(e[8]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Заявка клиента"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1)),t("div",dt,[f(Ro,{onSubmitApplication:e[4]||(e[4]=m=>o.hideModal("clientJobModal"))})])])])])],64))}}),bt={class:"btn-group-vertical w-100",role:"group","aria-label":"Вертикальное меню"},ft={class:"btn-group-vertical w-100",role:"group","aria-label":"Вертикальное меню"},gt={class:"modal fade",id:"reportModal",tabindex:"-1"},ct={class:"modal-dialog"},yt={class:"modal-content"},vt={class:"modal-body"},It={data(){return{userStore:v(),reportStore:$()}},methods:{openPrimaryRegistration(){new bootstrap.Modal(document.getElementById("primaryUserModal")).show()},goTo(n){this.$router.push({name:n})},handleReport(n){bootstrap.Modal.getInstance(document.getElementById("reportModal")).hide(),this.reportStore.exportFull(n)}}},ht=Object.assign(It,{__name:"MenuAgent",setup(n){return(o,e)=>{var m,s;return d(),p(I,null,[!((m=o.userStore.self)!=null&&m.registration_at)&&((s=o.userStore.self)==null?void 0:s.role)>0?(d(),p("button",{key:0,type:"button",onClick:e[0]||(e[0]=(...a)=>o.openPrimaryRegistration&&o.openPrimaryRegistration(...a)),class:"btn btn-success p-3 w-100 mb-2"},"Заполнить данные о себе ")):b("",!0),t("div",bt,[t("button",{type:"button",onClick:e[1]||(e[1]=a=>o.goTo("SalePage")),class:"btn btn-outline-primary p-3"},"Мои доставки "),e[4]||(e[4]=t("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#reportModal",class:"btn btn-outline-primary p-3"},"Сформировать отчет ",-1))]),e[6]||(e[6]=t("hr",null,null,-1)),t("div",ft,[t("button",{type:"button",onClick:e[2]||(e[2]=a=>o.goTo("SupplierPage")),class:"btn btn-outline-primary p-3"},"Список поставщиков "),t("button",{type:"button",onClick:e[3]||(e[3]=a=>o.goTo("ProductPage")),class:"btn btn-outline-primary p-3"},"Работа с товаром ")]),t("div",gt,[t("div",ct,[t("div",yt,[e[5]||(e[5]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Генератор отчетов"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1)),t("div",vt,[f(U,{onGenerateReport:o.handleReport},null,8,["onGenerateReport"])])])])])],64)}}}),kt={class:"btn-group-vertical w-100",role:"group","aria-label":"Вертикальное меню отчетов"},St={class:"modal fade",id:"reportModal",tabindex:"-1"},wt={class:"modal-dialog"},Mt={class:"modal-content"},_t={class:"modal-body"},Ut={data(){return{reportStore:$()}},methods:{goTo(n){this.$router.push({name:n})},handleReport(n){bootstrap.Modal.getInstance(document.getElementById("reportModal")).hide(),this.reportStore.exportFull(n)}}},Vt=Object.assign(Ut,{__name:"MenuSuperAdmin",setup(n){return(o,e)=>(d(),p(I,null,[t("div",kt,[e[8]||(e[8]=t("button",{type:"button",class:"btn btn-outline-primary p-3","data-bs-toggle":"modal","data-bs-target":"#reportModal"}," Сформировать отчет ",-1)),t("button",{type:"button",onClick:e[0]||(e[0]=m=>o.goTo("SalePage")),class:"btn btn-outline-primary p-3"},"Список продаж "),t("button",{type:"button",onClick:e[1]||(e[1]=m=>o.goTo("UserPage")),class:"btn btn-outline-primary p-3"},"Список пользователей "),t("button",{type:"button",onClick:e[2]||(e[2]=m=>o.goTo("SupplierPage")),class:"btn btn-outline-primary p-3"},"Список поставщиков "),t("button",{type:"button",onClick:e[3]||(e[3]=m=>o.goTo("AgentPage")),class:"btn btn-outline-primary p-3"},"Список админов "),t("button",{type:"button",onClick:e[4]||(e[4]=m=>o.goTo("AdminPage")),class:"btn btn-outline-primary p-3"},"Список старших админов "),t("button",{type:"button",onClick:e[5]||(e[5]=m=>o.goTo("ProductPage")),class:"btn btn-outline-primary p-3"},"Работа с товаром ")]),e[10]||(e[10]=t("hr",{class:"my-3"},null,-1)),t("button",{type:"button",onClick:e[6]||(e[6]=m=>o.goTo("ExcelExportPage")),class:"btn btn-outline-success p-3 w-100 mb-2"},"Выгрузка данных в эксель "),t("button",{type:"button",onClick:e[7]||(e[7]=m=>o.goTo("BirthdayPage")),class:"btn btn-outline-warning p-3 w-100"},"Дни рождения "),t("div",St,[t("div",wt,[t("div",Mt,[e[9]||(e[9]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Генератор отчетов"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1)),t("div",_t,[f(U,{onGenerateReport:o.handleReport},null,8,["onGenerateReport"])])])])])],64))}}),$t={name:"RoleSwitcher",data(){return{userStore:v(),selectedRole:v().self.role||0,roles:{0:"Пользователь",1:"Администратор",2:"Поставщик",3:"Старший администратор",4:"Суперадмин"}}},computed:{baseRoleLabel(){return this.roles[this.userStore.self.base_role??0]},roleLabel(){return this.roles[this.userStore.self.role??0]}},methods:{changeRole(){this.userStore.setRole(this.selectedRole),this.$emit("role-changed",this.selectedRole)}}},Ft={class:"form-floating my-2 w-100"},xt={class:"mt-2"},Rt={key:0,class:"mt-2"};function Ct(n,o,e,m,s,a){return d(),p(I,null,[t("div",Ft,[r(t("select",{id:"roleSelect",class:"form-select","onUpdate:modelValue":o[0]||(o[0]=u=>s.selectedRole=u),onChange:o[1]||(o[1]=(...u)=>a.changeRole&&a.changeRole(...u))},[...o[2]||(o[2]=[t("option",{value:0},"Пользователь",-1),t("option",{value:1},"Администратор",-1),t("option",{value:3},"Старший администратор",-1),t("option",{value:4},"Суперадмин",-1)])],544),[[C,s.selectedRole]]),o[3]||(o[3]=t("label",{for:"roleSelect",class:"form-label"},"Сменить роль",-1))]),t("p",xt,[o[4]||(o[4]=c(" Текущая роль: ",-1)),t("strong",null,_(a.roleLabel),1)]),a.roleLabel!==a.baseRoleLabel?(d(),p("p",Rt,[o[5]||(o[5]=c(" Базовая роль роль: ",-1)),t("strong",null,_(a.baseRoleLabel),1)])):b("",!0)],64)}const qt=h($t,[["render",Ct]]),At={key:0,class:"container-fluid p-3"},Tt={data(){return{userStore:v()}},computed:{tg(){return window.Telegram.WebApp},user(){return this.userStore.self||null}},methods:{}},Xt=Object.assign(Tt,{__name:"MenuPage",setup(n){const{t:o}=q();return(e,m)=>e.user?(d(),p("div",At,[e.user.role===0?(d(),y(pt,{key:0})):b("",!0),e.user.role===3?(d(),y(D,{key:1})):b("",!0),e.user.role===1?(d(),y(ht,{key:2})):b("",!0),e.user.role===4?(d(),y(Vt,{key:3})):b("",!0),e.user.base_role===4?(d(),y(qt,{key:4})):b("",!0)])):b("",!0)}});export{Xt as default};
