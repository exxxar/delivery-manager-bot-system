import{f as c,H as n}from"./app-ch_LJyIi.js";import{m as l}from"./makeAxiosFactory-OBAiVw0y.js";const e="/bot-api/exports",u=c("exports",{state:()=>({loading:!1,error:null,successMessage:null,exportData:null}),actions:{async exportBirthdaysList(){return this._exportHelper(`${e}/birthdays`,"Дни рождения выгружены")},async exportAgents(){return this._exportHelper(`${e}/agents`,"Младшие администраторы выгружены")},async exportAdmins(){return this._exportHelper(`${e}/admins`,"Администраторы выгружены")},async exportUsers(){return this._exportHelper(`${e}/users`,"Пользователи выгружены")},async exportProducts(r=0){return this._exportHelper(`${e}/products?type=${r}`,"Продукты выгружены")},async exportIndividual(r){var o,a;const t=n();let i=r.id;this.loading=!0;try{const{data:s}=await l(`${e}/individual/${i}`,"POST",r);return this.successMessage="Отчет сформирован",this.exportData=s,t.show(this.successMessage,"success"),s}catch(s){throw this.error=((a=(o=s.response)==null?void 0:o.data)==null?void 0:a.message)??"Ошибка выгрузки",t.show(this.error,"error"),s}finally{this.loading=!1}},async exportFull(r){var o,a;const t=n();let i=`${e}/full`;t.show("Процесс генерации отчета запущен"),this.loading=!0,this.error=null;try{const{data:s}=await l(i,"POST",r);return this.successMessage="Отчет сформирован",this.exportData=s,t.show(this.successMessage,"success"),s}catch(s){throw this.error=((a=(o=s.response)==null?void 0:o.data)==null?void 0:a.message)??"Ошибка выгрузки",t.show(this.error,"error"),s}finally{this.loading=!1}},async exportCategories(){return this._exportHelper(`${e}/categories`,"Категории продуктов выгружены")},async exportClients(){return this._exportHelper(`${e}/clients`,"Покупатели выгружены")},async exportSuppliers(){return this._exportHelper(`${e}/suppliers`,"Поставщики выгружены")},async exportSalesHistory(){return this._exportHelper(`${e}/sales-history`,"История продаж выгружена")},async _exportHelper(r,t){var o,a;const i=n();i.show("Процесс генерации отчета запущен"),this.loading=!0,this.error=null;try{const{data:s}=await l(r,"GET");return this.successMessage=t,this.exportData=s,i.show(this.successMessage,"success"),s}catch(s){throw this.error=((a=(o=s.response)==null?void 0:o.data)==null?void 0:a.message)??"Ошибка выгрузки",i.show(this.error,"error"),s}finally{this.loading=!1}}}});export{u};
