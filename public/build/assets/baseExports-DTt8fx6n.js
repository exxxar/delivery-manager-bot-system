import{f as c,H as n}from"./app-DzD-JY4S.js";import{m as p}from"./makeAxiosFactory-D1-PeoKG.js";const e="/bot-api/exports",x=c("exports",{state:()=>({loading:!1,error:null,successMessage:null,exportData:null}),actions:{async exportBirthdaysList(){return this._exportHelper(`${e}/birthdays`,"Дни рождения выгружены")},async exportAgents(){return this._exportHelper(`${e}/agents`,"Младшие администраторы выгружены")},async exportAdmins(){return this._exportHelper(`${e}/admins`,"Администраторы выгружены")},async exportUsers(){return this._exportHelper(`${e}/users`,"Пользователи выгружены")},async exportProducts(r=0){return this._exportHelper(`${e}/products?type=${r}`,"Продукты выгружены")},async exportFull(r){var a,s;const o=n();let t=r.id||null,l=t?`${e}/full/${t}`:`${e}/full`;o.show("Процесс генерации отчета запущен"),this.loading=!0,this.error=null;try{const{data:i}=await p(l,"POST",r);return this.successMessage="Отчет сформирован",this.exportData=i,o.show(this.successMessage,"success"),i}catch(i){throw this.error=((s=(a=i.response)==null?void 0:a.data)==null?void 0:s.message)??"Ошибка выгрузки",o.show(this.error,"error"),i}finally{this.loading=!1}},async exportCategories(){return this._exportHelper(`${e}/categories`,"Категории продуктов выгружены")},async exportClients(){return this._exportHelper(`${e}/clients`,"Покупатели выгружены")},async exportSuppliers(){return this._exportHelper(`${e}/suppliers`,"Поставщики выгружены")},async exportSalesHistory(){return this._exportHelper(`${e}/sales-history`,"История продаж выгружена")},async _exportHelper(r,o){var l,a;const t=n();t.show("Процесс генерации отчета запущен"),this.loading=!0,this.error=null;try{const{data:s}=await p(r,"GET");return this.successMessage=o,this.exportData=s,t.show(this.successMessage,"success"),s}catch(s){throw this.error=((a=(l=s.response)==null?void 0:l.data)==null?void 0:a.message)??"Ошибка выгрузки",t.show(this.error,"error"),s}finally{this.loading=!1}}}});export{x as u};
